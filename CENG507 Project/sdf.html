<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDF - EMG Signal Processing Pipeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: white;
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #1f2937;
            font-size: 1.875rem;
            margin-bottom: 0.5rem;
        }
        
        h2 {
            text-align: center;
            color: #0891b2;
            font-size: 1.125rem;
            margin-bottom: 2rem;
        }
        
        .svg-container {
            background: #f9fafb;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        svg {
            width: 100%;
            height: auto;
        }
        
        .actor {
            fill: url(#actorGrad);
            stroke: #0e7490;
            stroke-width: 2;
        }
        
        .actor-text {
            fill: white;
            font-size: 12px;
            font-weight: 600;
            text-anchor: middle;
        }
        
        .actor-subtext {
            fill: #cffafe;
            font-size: 10px;
            text-anchor: middle;
        }
        
        .rate-produce {
            fill: #059669;
            stroke: #047857;
            stroke-width: 2;
        }
        
        .rate-consume {
            fill: #dc2626;
            stroke: #b91c1c;
            stroke-width: 2;
        }
        
        .rate-text {
            fill: white;
            font-size: 10px;
            font-weight: bold;
            text-anchor: middle;
        }
        
        .arrow {
            stroke: #0891b2;
            stroke-width: 2;
            fill: none;
        }
        
        .buffer-box {
            fill: white;
            stroke: #0891b2;
            stroke-width: 1;
        }
        
        .buffer-text {
            fill: #0e7490;
            font-size: 10px;
            font-weight: 500;
            text-anchor: middle;
        }
        
        .title-box {
            fill: #ecfeff;
            stroke: #0891b2;
            stroke-width: 1;
        }
        
        .title-text {
            fill: #0e7490;
            font-size: 12px;
            font-weight: 600;
            text-anchor: middle;
        }
        
        .legend-box {
            fill: #f8fafc;
            stroke: #e2e8f0;
            stroke-width: 2;
        }
        
        .legend-title {
            fill: #374151;
            font-size: 12px;
            font-weight: bold;
        }
        
        .legend-text {
            fill: #6b7280;
            font-size: 10px;
        }
        
        .property-text {
            fill: #059669;
            font-size: 10px;
            font-weight: 500;
        }
        
        .output-actor {
            fill: #059669;
            stroke: #047857;
            stroke-width: 2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Synchronous Dataflow Graph</h1>
        <h2>EMG Signal Processing Pipeline</h2>
        
        <div class="svg-container">
            <svg viewBox="0 0 850 520" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#0891b2"/>
                    </marker>
                    <linearGradient id="actorGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#0891b2"/>
                        <stop offset="100%" stop-color="#0e7490"/>
                    </linearGradient>
                </defs>

                <!-- Title -->
                <rect class="title-box" x="200" y="15" width="450" height="30" rx="6"/>
                <text class="title-text" x="425" y="35">
                    Multi-Rate Signal Processing — Latency &lt; 50ms Guaranteed
                </text>

                <!-- Row 1: Acquisition and Filtering -->
                <g transform="translate(30, 80)">
                    <!-- EMG Acquire -->
                    <rect class="actor" x="0" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="55" y="25">EMG Acquire</text>
                    <text class="actor-subtext" x="55" y="42">64 channels</text>
                    <circle class="rate-produce" cx="105" cy="28" r="14"/>
                    <text class="rate-text" x="105" y="33">64</text>

                    <line class="arrow" x1="112" y1="28" x2="148" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="118" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="130" y="28">64</text>

                    <!-- Bandpass Filter -->
                    <rect class="actor" x="155" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="210" y="25">Bandpass</text>
                    <text class="actor-subtext" x="210" y="42">20-450 Hz</text>
                    <circle class="rate-consume" cx="160" cy="28" r="14"/>
                    <text class="rate-text" x="160" y="33">64</text>
                    <circle class="rate-produce" cx="260" cy="28" r="14"/>
                    <text class="rate-text" x="260" y="33">64</text>

                    <line class="arrow" x1="267" y1="28" x2="303" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="273" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="285" y="28">64</text>

                    <!-- Notch Filter -->
                    <rect class="actor" x="310" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="365" y="25">Notch Filter</text>
                    <text class="actor-subtext" x="365" y="42">50/60 Hz</text>
                    <circle class="rate-consume" cx="315" cy="28" r="14"/>
                    <text class="rate-text" x="315" y="33">64</text>
                    <circle class="rate-produce" cx="415" cy="28" r="14"/>
                    <text class="rate-text" x="415" y="33">64</text>

                    <line class="arrow" x1="422" y1="28" x2="458" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="428" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="440" y="28">64</text>

                    <!-- Spatial Filter -->
                    <rect class="actor" x="465" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="520" y="25">Spatial Filter</text>
                    <text class="actor-subtext" x="520" y="42">CAR</text>
                    <circle class="rate-consume" cx="470" cy="28" r="14"/>
                    <text class="rate-text" x="470" y="33">64</text>
                    <circle class="rate-produce" cx="570" cy="28" r="14"/>
                    <text class="rate-text" x="570" y="33">64</text>

                    <line class="arrow" x1="520" y1="57" x2="520" y2="93" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="508" y="63" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="520" y="73">64</text>
                </g>

                <!-- Row 2: Decimation and Windowing -->
                <g transform="translate(185, 180)">
                    <!-- Decimator -->
                    <rect class="actor" x="280" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="335" y="25">Decimator</text>
                    <text class="actor-subtext" x="335" y="42">↓2 (2:1)</text>
                    <circle class="rate-consume" cx="285" cy="28" r="14"/>
                    <text class="rate-text" x="285" y="33">64</text>
                    <circle class="rate-produce" cx="385" cy="28" r="14"/>
                    <text class="rate-text" x="385" y="33">32</text>

                    <line class="arrow" x1="392" y1="28" x2="428" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="398" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="410" y="28">32</text>

                    <!-- Window Buffer -->
                    <rect class="actor" x="435" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="490" y="25">Window</text>
                    <text class="actor-subtext" x="490" y="42">200ms</text>
                    <circle class="rate-consume" cx="440" cy="28" r="14"/>
                    <text class="rate-text" x="440" y="33">32</text>
                    <circle class="rate-produce" cx="540" cy="28" r="14"/>
                    <text class="rate-text" x="540" y="33">400</text>

                    <line class="arrow" x1="490" y1="57" x2="490" y2="93" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="473" y="63" width="34" height="14" rx="3"/>
                    <text class="buffer-text" x="490" y="73">400</text>
                </g>

                <!-- Row 3: Feature Extraction and Classification -->
                <g transform="translate(30, 280)">
                    <!-- Gesture Output -->
                    <rect class="output-actor" x="0" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="55" y="25">Gesture</text>
                    <text class="actor-subtext" x="55" y="42">Output</text>
                    <circle class="rate-consume" cx="5" cy="28" r="14"/>
                    <text class="rate-text" x="5" y="33">1</text>

                    <line class="arrow" x1="148" y1="28" x2="112" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="123" y="18" width="20" height="14" rx="3"/>
                    <text class="buffer-text" x="133" y="28">1</text>

                    <!-- DNN Classifier -->
                    <rect class="actor" x="155" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="210" y="25">Classifier</text>
                    <text class="actor-subtext" x="210" y="42">DNN</text>
                    <circle class="rate-consume" cx="160" cy="28" r="14"/>
                    <text class="rate-text" x="160" y="33">256</text>
                    <circle class="rate-produce" cx="260" cy="28" r="14"/>
                    <text class="rate-text" x="260" y="33">1</text>

                    <line class="arrow" x1="303" y1="28" x2="267" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="273" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="285" y="28">256</text>

                    <!-- Normalizer -->
                    <rect class="actor" x="310" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="365" y="25">Normalize</text>
                    <text class="actor-subtext" x="365" y="42">μ=0, σ=1</text>
                    <circle class="rate-consume" cx="315" cy="28" r="14"/>
                    <text class="rate-text" x="315" y="33">256</text>
                    <circle class="rate-produce" cx="415" cy="28" r="14"/>
                    <text class="rate-text" x="415" y="33">256</text>

                    <line class="arrow" x1="458" y1="28" x2="422" y2="28" marker-end="url(#arrow)"/>
                    <rect class="buffer-box" x="428" y="18" width="24" height="14" rx="3"/>
                    <text class="buffer-text" x="440" y="28">256</text>

                    <!-- Feature Extract -->
                    <rect class="actor" x="465" y="0" width="110" height="55" rx="8"/>
                    <text class="actor-text" x="520" y="25">Features</text>
                    <text class="actor-subtext" x="520" y="42">Extract</text>
                    <circle class="rate-consume" cx="470" cy="28" r="14"/>
                    <text class="rate-text" x="470" y="33">400</text>
                    <circle class="rate-produce" cx="570" cy="28" r="14"/>
                    <text class="rate-text" x="570" y="33">256</text>
                </g>

                <!-- Legend -->
                <g transform="translate(30, 380)">
                    <rect class="legend-box" x="0" y="0" width="790" height="120" rx="8"/>
                    <text class="legend-title" x="20" y="25">Legend & SDF Properties</text>
                    <line x1="20" y1="35" x2="770" y2="35" stroke="#e2e8f0" stroke-width="1"/>
                    
                    <g transform="translate(20, 50)">
                        <rect class="actor" x="0" y="0" width="50" height="25" rx="5"/>
                        <text class="legend-text" x="60" y="17">Actor</text>
                        
                        <circle class="rate-produce" cx="130" cy="12" r="10"/>
                        <text class="legend-text" x="145" y="17">Production</text>
                        
                        <circle class="rate-consume" cx="230" cy="12" r="10"/>
                        <text class="legend-text" x="245" y="17">Consumption</text>
                        
                        <rect class="buffer-box" x="330" y="2" width="24" height="14" rx="3"/>
                        <text class="buffer-text" x="342" y="12">N</text>
                        <text class="legend-text" x="365" y="17">Buffer</text>
                    </g>
                    
                    <g transform="translate(20, 85)">
                        <text class="property-text" x="0" y="12">✓ Consistent</text>
                        <text class="property-text" x="150" y="12">✓ Deadlock-free</text>
                        <text class="property-text" x="300" y="12">✓ Bounded (400 tokens)</text>
                        <text class="property-text" x="500" y="12">✓ Latency &lt; 50ms</text>
                    </g>
                </g>
            </svg>
        </div>
    </div>
</body>
</html>